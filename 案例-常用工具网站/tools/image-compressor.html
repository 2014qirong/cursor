<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>图片压缩 - 实用工具集</title>
    <link rel="stylesheet" href="../styles/main.css">
    <link rel="stylesheet" href="../styles/tools.css">
    <link rel="stylesheet" href="../styles/responsive.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>
    <!-- 导航栏 -->
    <nav class="navbar">
        <div class="container">
            <div class="logo">
                <h1>实用工具集</h1>
            </div>
            <ul class="nav-links">
                <li><a href="../index.html">首页</a></li>
                <li><a href="../index.html#about">关于我们</a></li>
                <li><a href="../index.html#contact">联系方式</a></li>
            </ul>
            <div class="burger">
                <div class="line1"></div>
                <div class="line2"></div>
                <div class="line3"></div>
            </div>
        </div>
    </nav>

    <!-- 工具内容 -->
    <main>
        <div class="container">
            <div class="tool-container">
                <div class="tool-header">
                    <i class="fas fa-compress"></i>
                    <h2>图片压缩</h2>
                    <p>无损压缩您的图片，减小文件大小</p>
                </div>
                
                <div class="upload-area" id="uploadArea">
                    <i class="fas fa-cloud-upload-alt" style="font-size: 3rem; color: #aaa;"></i>
                    <h3>拖放图片到这里</h3>
                    <p>或者</p>
                    <label for="fileInput" class="btn">选择图片</label>
                    <input type="file" id="fileInput" class="file-input" multiple accept="image/*">
                    <p class="drag-instructions"><i class="fas fa-info-circle"></i> 支持格式: JPG, PNG, GIF, BMP, WEBP</p>
                    <p class="drag-instructions"><i class="fas fa-info-circle"></i> 最多可上传20张图片，每张不超过10MB</p>
                </div>
                
                <div class="options-area">
                    <h3>压缩选项</h3>
                    
                    <div class="option-row">
                        <label for="quality">压缩质量</label>
                        <div class="range-container w-full">
                            <input type="range" id="quality" min="1" max="100" value="80" class="w-full">
                            <span id="qualityValue">80%</span>
                        </div>
                    </div>
                    
                    <div class="option-row">
                        <label for="maxWidth">最大宽度</label>
                        <div class="input-container flex w-full">
                            <input type="number" id="maxWidth" min="0" max="10000" value="1920" class="w-full">
                            <span class="input-suffix">px</span>
                        </div>
                        <small>设为0表示不限制</small>
                    </div>
                    
                    <div class="option-row">
                        <label for="maxHeight">最大高度</label>
                        <div class="input-container flex w-full">
                            <input type="number" id="maxHeight" min="0" max="10000" value="1080" class="w-full">
                            <span class="input-suffix">px</span>
                        </div>
                        <small>设为0表示不限制</small>
                    </div>
                    
                    <div class="option-row">
                        <label for="format">输出格式</label>
                        <select id="format">
                            <option value="jpeg">JPEG</option>
                            <option value="png">PNG</option>
                            <option value="webp">WebP</option>
                        </select>
                    </div>
                    
                    <div class="option-row">
                        <label for="fileNaming">文件命名</label>
                        <select id="fileNaming">
                            <option value="original">原文件名_compressed</option>
                            <option value="timestamp">时间戳</option>
                            <option value="sequence">压缩图片_序号</option>
                        </select>
                    </div>
                </div>

                <div class="tabs">
                    <div class="tab active" data-tab="before-after">压缩前后对比</div>
                    <div class="tab" data-tab="all-images">所有图片</div>
                </div>
                
                <div class="tab-content active" id="before-after-content">
                    <div class="comparison-container">
                        <div class="comparison-item">
                            <div class="comparison-header">
                                <h4>压缩前</h4>
                                <span id="original-size">0 KB</span>
                            </div>
                            <div class="comparison-image">
                                <img id="original-preview" src="../assets/images/placeholder.jpg" alt="原图预览">
                            </div>
                        </div>
                        <div class="comparison-item">
                            <div class="comparison-header">
                                <h4>压缩后</h4>
                                <span id="compressed-size">0 KB</span>
                            </div>
                            <div class="comparison-image">
                                <img id="compressed-preview" src="../assets/images/placeholder.jpg" alt="压缩预览">
                            </div>
                        </div>
                    </div>
                    <div class="savings-info">
                        <p>压缩率: <span id="compression-ratio">0%</span></p>
                        <p>节省空间: <span id="saved-size">0 KB</span></p>
                    </div>
                </div>
                
                <div class="tab-content" id="all-images-content">
                    <div class="preview-area" id="previewArea"></div>
                </div>
                
                <div class="progress-bar">
                    <div class="progress" id="progress"></div>
                </div>
                
                <div class="actions-area">
                    <button class="btn btn-outline" id="resetBtn">重置</button>
                    <button class="btn" id="compressBtn">压缩图片</button>
                    <button class="btn" id="downloadAllBtn" style="display: none;">下载全部</button>
                </div>
            </div>
            
            <div class="card mt-4">
                <h3>使用说明</h3>
                <ol>
                    <li>通过拖放或点击"选择图片"按钮上传需要压缩的图片</li>
                    <li>调整压缩选项，如质量、尺寸和输出格式</li>
                    <li>点击"压缩图片"按钮开始压缩</li>
                    <li>压缩完成后，您可以下载单个图片或点击"下载全部"一次性下载所有压缩后的图片</li>
                </ol>
                
                <h3 class="mt-3">功能特点</h3>
                <ul>
                    <li>支持批量压缩多张图片</li>
                    <li>可调节压缩质量，平衡大小和画质</li>
                    <li>支持调整图片尺寸，进一步减小文件大小</li>
                    <li>所有处理在浏览器中完成，保护您的隐私</li>
                    <li>支持多种图片格式，包括JPG、PNG、WebP等</li>
                </ul>
            </div>
        </div>
    </main>

    <!-- 页脚 -->
    <footer>
        <div class="container">
            <div class="footer-content">
                <div class="footer-section">
                    <h3>实用工具集</h3>
                    <p>为您提供各种在线实用工具，提高工作效率</p>
                </div>
                <div class="footer-section">
                    <h3>快速链接</h3>
                    <ul>
                        <li><a href="../index.html">首页</a></li>
                        <li><a href="../index.html#about">关于我们</a></li>
                        <li><a href="../index.html#contact">联系方式</a></li>
                        <li><a href="../index.html#privacy">隐私政策</a></li>
                    </ul>
                </div>
                <div class="footer-section">
                    <h3>联系我们</h3>
                    <p>邮箱: contact@toolbox.com</p>
                    <div class="social-icons">
                        <a href="#"><i class="fab fa-weixin"></i></a>
                        <a href="#"><i class="fab fa-weibo"></i></a>
                        <a href="#"><i class="fab fa-github"></i></a>
                    </div>
                </div>
            </div>
            <div class="copyright">
                <p>&copy; 2023 实用工具集. 保留所有权利.</p>
            </div>
        </div>
    </footer>

    <!-- 脚本 -->
    <script src="../scripts/main.js"></script>
    <script src="../scripts/utils.js"></script>
    <script>
        // 页面加载完成后初始化工具
        document.addEventListener('DOMContentLoaded', () => {
            // 这里是图片压缩工具的实现代码
            // 实际项目中应该放在单独的js文件中，类似于image-to-pdf.js
            console.log('图片压缩工具初始化');
            
            // 测试utils.js是否加载
            if (window.utils) {
                console.log('工具函数库加载成功');
            }
            
            // 简单的标签切换功能
            const tabs = document.querySelectorAll('.tab');
            const tabContents = document.querySelectorAll('.tab-content');
            
            tabs.forEach(tab => {
                tab.addEventListener('click', () => {
                    // 移除所有活动标签
                    tabs.forEach(t => t.classList.remove('active'));
                    tabContents.forEach(c => c.classList.remove('active'));
                    
                    // 激活点击的标签
                    tab.classList.add('active');
                    const contentId = `${tab.dataset.tab}-content`;
                    document.getElementById(contentId).classList.add('active');
                });
            });
            
            // 更新质量值显示
            const qualitySlider = document.getElementById('quality');
            const qualityValue = document.getElementById('qualityValue');
            
            qualitySlider.addEventListener('input', () => {
                qualityValue.textContent = `${qualitySlider.value}%`;
            });
        });
    </script>
</body>
</html> 